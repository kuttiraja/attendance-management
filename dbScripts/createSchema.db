use attendancemgmt;

db.createCollection('class');
db.createCollection('staff');
db.createCollection('student');
db.createCollection('attendance');
db.createCollection('batch');
db.createCollection('subject');
db.createCollection('period');
db.createCollection("counters");

function getNextSequenceValue(sequenceName){
   var sequenceDocument = db.counters.findAndModify({
      query:{_id: sequenceName },
      update: {$inc:{sequence_value:1}},
      new:true
   });
   return sequenceDocument.sequence_value;
};

//Creating counter variables for each collections.
db.counters.insert({_id:"classId", sequence_value:0});
db.counters.insert({_id:"studentId", sequence_value:0});
db.counters.insert({_id:"staffId", sequence_value:0});
db.counters.insert({_id:"attendanceId", sequence_value:0});
db.counters.insert({_id:"batchId", sequence_value:0});
db.counters.insert({_id:"subjectId", sequence_value:0});
db.counters.insert({_id:"periodId", sequence_value:0});